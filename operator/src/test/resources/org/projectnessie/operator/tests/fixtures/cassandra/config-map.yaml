apiVersion: v1
kind: ConfigMap
metadata:
  name: nessie-test
  labels:
    app.kubernetes.io/component: nessie
    app.kubernetes.io/instance: nessie-test
    app.kubernetes.io/managed-by: nessie-controller
    app.kubernetes.io/name: nessie
    app.kubernetes.io/part-of: nessie
    # noinspection KubernetesUnknownValues
    app.kubernetes.io/version: "@projectVersion@"
data:
  application.properties: |
    nessie.server.authentication.enabled=true
    nessie.server.authorization.enabled=true
    nessie.server.authorization.rules.allowViewingBranch=op=='VIEW_REFERENCE' && role.startsWith('test_user') && ref.startsWith('allowedBranch')
    nessie.server.default-branch=my-branch
    nessie.version.store.persist.cache-capacity-fraction-adjust-mb=128
    nessie.version.store.persist.cache-capacity-fraction-min-size-mb=128
    nessie.version.store.persist.cache-capacity-fraction-of-heap=0.8
    nessie.version.store.persist.repository-id=my-repository
    nessie.version.store.type=CASSANDRA
    quarkus.cassandra.auth.username=cassandra
    quarkus.cassandra.contact-points=cassandra-0.cassandra.default.svc.cluster.local,cassandra-1.cassandra.default.svc.cluster.local,cassandra-2.cassandra.default.svc.cluster.local
    quarkus.cassandra.keyspace=ks1
    quarkus.cassandra.local-datacenter=datacenter1
    quarkus.log.category."org.projectnessie".level=TRACE
    quarkus.log.console.format=%d{HH:mm:ss} %s%e%n
    quarkus.log.console.level=DEBUG
    quarkus.log.file.level=DEBUG
    quarkus.log.level=DEBUG
    quarkus.oidc.auth-server-url=http://keycloak:8080/auth/realms/nessie
    quarkus.oidc.client-id=quarkus-app
    quarkus.otel.exporter.otlp.traces.endpoint=https://otlp-collector:4317
    quarkus.otel.resource.attributes=foo=bar,service.name=nessie-test
    quarkus.otel.traces.sampler=parentbased_always_off
